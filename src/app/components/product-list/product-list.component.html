<div class="page">
    <h2>Quản Lý Sản Phẩm</h2>
    
    <div class="form-card" *ngIf="!selectedProduct">
      <h3>Thêm Sản Phẩm Mới</h3>
      <form (ngSubmit)="createProduct()">
        <input [(ngModel)]="newProduct.name" name="name" placeholder="Tên sản phẩm" required>
        <input [(ngModel)]="newProduct.description" name="description" placeholder="Mô tả" required>
        <input [(ngModel)]="newProduct.price" name="price" type="number" placeholder="Giá" required>
        <input [(ngModel)]="newProduct.stock" name="stock" type="number" placeholder="Số lượng" required>
        <button type="submit">Thêm Sản Phẩm</button>
      </form>
    </div>

    <div class="form-card" *ngIf="selectedProduct">
      <h3>Cập nhật Sản Phẩm (ID: {{selectedProduct.id}})</h3>
      <form (ngSubmit)="updateProduct()">
        <input [(ngModel)]="selectedProduct.name" name="name_edit" placeholder="Tên sản phẩm" required>
        <input [(ngModel)]="selectedProduct.description" name="description_edit" placeholder="Mô tả" required>
        <input [(ngModel)]="selectedProduct.price" name="price_edit" type="number" placeholder="Giá" required>
        <input [(ngModel)]="selectedProduct.stock" name="stock_edit" type="number" placeholder="Số lượng" required>
        <button type="submit" class="btn-update">Cập nhật</button>
        <button type="button" class="btn-cancel" (click)="cancelEdit()">Hủy</button>
      </form>
    </div>

    <div class="table-card">
      <h3>Danh Sách Sản Phẩm</h3>
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Tên</th>
            <th>Mô tả</th>
            <th>Giá</th>
            <th>Kho</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products">
            <td>{{product.id}}</td>
            <td>{{product.name}}</td>
            <td>{{product.description}}</td>
            <td>{{product.price | number:'1.0-0'}} VNĐ</td>
            <td>{{product.stock}}</td>
            <td>
              <button class="btn-edit" (click)="selectProductForEdit(product)" [disabled]="selectedProduct">Sửa</button>
              <button class="btn-delete" (click)="deleteProduct(product.id!)">Xóa</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
</div>